@model ProProperty.Models.PropertyWithPremises
@{
    ViewBag.Title = "PropertyDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <img src="~/Image/header.png" />
</div>

<div class="row">

    <div class="col-md-4">
        
    </div>
    <div class="col-md-8">
        <script src="http://maps.googleapis.com/maps/api/js">
        </script>

        <script>
                var map;
                function createMarker() {
                    var name = "hdb";
                    var image = returnIcon(name);
                    var marker = new google.maps.Marker
                        (
                            {
                                position: new google.maps.LatLng(1.3699034, 103.8454906),
                                map: map,
                                icon: image,
                                title: '@Html.DisplayNameFor(model => model.property.propertyID)'
                            }
                        );
                    //for clicking on the marker
                    var infowindow = new google.maps.InfoWindow({
                        content: '@Html.DisplayNameFor(model => model.property.address)'
                    });
                    google.maps.event.addListener(marker, 'click', function () {

                        infowindow.open(map, marker);
                    });
                }
                function createMarker1(id, address, lat, lng, type, link) {
                    console.log(id + lat);
                    console.log(lng);
                    console.log(type);
                    var image = returnIcon(type);
                    console.log(image);
                    var marker = new google.maps.Marker
                        (
                            {
                                position: new google.maps.LatLng(lat, lng),
                                map: map,
                                icon: image,
                                title: address
                            }
                        );
                    //for clicking on the marker
                    var infowindow = new google.maps.InfoWindow({
                        content: address + '</br><a href="' + link + '"> View property </a>'
                    });
                    google.maps.event.addListener(marker, 'click', function () {
                        infowindow.open(map, marker);
                    });
                }
                function returnIcon(type) {
                    if (type == "hdb") {
                        return '/Image/icon/hdb.png';
                    }
                    if (type == "private") {
                        return '/Image/icon/private.png';
                    }
                    if (type == "landed") {
                        return '/Image/icon/landed.png';
                    }
                }
                function returnPremises(type) {
                    if (type == "dining") {
                        return 1;
                    }
                    if (type == "train") {
                        return 1;
                    }
                    if (type == "school") {
                        return 1;
                    }
                    if (type == "park") {
                        return 1;
                    }
                    if (type == "highway") {
                        return 1;
                    }
                    if (type = "gym") {
                        return 1;
                    }
                    if (type == "clinic.png") {
                        return 1;
                    }
                }
                function InitializeMap() {

                    var latlng = new google.maps.LatLng(1.373334, 103.835518);
                    var myOptions = {
                        zoom: 11,
                        center: latlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                    //createMarker();
                    @if (Model != null)
                    {
                        //console.log("got model");
                        //foreach (var item in Model)
                        //{
                                @*@Html.DisplayFor(modelItem => item.property_id)
                                @Html.DisplayFor(modelItem => item.address)
                                @Html.DisplayFor(modelItem => item.latitude)
                                de=@Html.DisplayFor(modelItem => item.longtitude)
                                @Html.DisplayFor(modelItem => item.type)*@
                                <text>createMarker1(@Html.DisplayFor(model => model.property.propertyID), "@Html.DisplayFor(model => model.property.address)", @Html.DisplayFor(model => model.property.Latitude), @Html.DisplayFor(model => model.property.Longitude),"@Html.DisplayFor(model => model.property.propertyType)", "@Url.Action("PropertyDetails", "Property", new { id = Model.property.propertyID } )");</text>
                                @*<text>createMarker();</text>*@
                        //}
                    }


                }
                window.onload = InitializeMap;

        </script>
        <div id="map_canvas" style="width:900px; height:500px"></div>
    </div>
</div>
